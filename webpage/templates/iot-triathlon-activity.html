{% extends "iot-base-2-am.html" %}
{% block header %} {{super() }}

{% endblock %}




{% block sidemenu %} {{super() }} {% endblock %}

{% block servicelinks %} {{super() }}

 {% endblock %}
{% block maincontent %} 

    <!-- /.col (LEFT) -->
    
    <!-- /.col (RIGHT) -->



<div class="row">

    <!-- AREA CHART -->
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Workout Cooldown</h3>

            <div class="box-tools pull-right">
                <div class="btn-group">
                    <div id="user-choice">
                        <!-- <div id="checkboxes"></div><button onclick="handle_select()">Select</button> -->
                        <label for="from">From</label>
                        <input type="text" id="from" name="from" />
                        <label for="to">To</label>
                        <input type="text" id="to" name="to" />  

                        <input type="checkbox" id="chk_type1" value="son" checked="true" onclick="update_chart()" /> <label for="from">Show Type 1</label> 
                        <input type="checkbox" id="chk_type2" value="son2" checked="true" onclick="update_chart()" /> <label for="from">Show Type 2</label> 
                        <input type="checkbox" id="chk_data" value="dataSelected" checked="true" onclick="update_chart()" /> <label for="from">Show Data Points</label> 

                       
                    </div>

                </div>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
            </div>
        </div>
        <div class="box-body chart-responsive">

            <div id="chartdiv1" style="width:100%; height:500px;"></div>


        </div>
    </div>

    <!-- /.box-body -->
    </div>


    <div class="row">

        <!-- AREA CHART -->
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Sleep/Deep Sleep Distribution</h3>

                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse">
                        <i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div>
            <div class="box-body chart-responsive">

                <div id="chartdiv7" style="width:100%; height:500px;"></div>


            </div>
        </div>
        <!-- /.box-body -->



    </div>









    <div class="row">

        <!-- AREA CHART -->
        <div class="box box-primary">
            <div class="box-header with-border">
                <h3 class="box-title">Sleeping Hours with Deep Sleep</h3>

                <div class="box-tools pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-info">Compare</button>
                        <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                            <span class="caret"></span>
                            <span class="sr-only">Toggle Dropdown</span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li><a onclick="jsfunction()" href="#">Athlete 1</a></li>
                            <li><a href="#">Athlete 2</a></li>
                            <li><a href="#">Athlete 3</a></li>
                            <li><a href="#">Athlete 4</a></li>
                            <li><a href="#">Athlete 5</a></li>

                            <li class="divider"></li>
                            <li><a href="#">Separated link</a></li>
                        </ul>


                        <button type="button" class="btn btn-box-tool" data-widget="collapse">
                            <i class="fa fa-minus"></i>
                        </button>

                    </div>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                </div>
            </div>
            <div class="box-body chart-responsive">

                <div id="chartdiv4" style="width:100%; height:500px;"></div>


            </div>
        </div>
        <!-- /.box-body -->



    </div>
    {% endblock %}

    {% block JS %} {{super() }}
    <script src="{{url_for('static', filename= 'iss-ui.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename= 'charts.js')}}"></script>
     <script type="text/javascript" src="http://momentjs.com/downloads/moment.js"></script>
     <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="{{url_for('static', filename= 'jquery-ui.js')}}"></script>

  <link rel="stylesheet" href="{{url_for('static', filename= 'jquery-ui.css')}}">
    <script type="text/javascript">
        // on ready function
        $(function () {
            $("#from").datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                dateFormat: 'dd.mm.yy',
                onClose: function (selectedDate) {
                    $("#to").datepicker("option", "minDate", selectedDate);
                },
                onSelect: function (date) {
                    update_chart();
                }
            });
            $("#to").datepicker({
                defaultDate: "+1w",
                changeMonth: true,
                numberOfMonths: 1,
                dateFormat: 'dd.mm.yy',
                onClose: function (selectedDate) {
                    $("#from").datepicker("option", "maxDate", selectedDate);
                },
                onSelect: function (date) {
                    update_chart();
                }
            });

            $("#from").datepicker('setDate', new Date());
            $("#to").datepicker('setDate', new Date());
            $('#chk_type1').attr("checked", true);
            $('#chk_type2').attr("checked", true);
            $('#chk_data').attr("checked", true);
            update_chart();

        });
        function update_chart() {
            var date_from = $("#from").val();
            var date_to = $("#to").val();
            var show_type1 = $("#chk_type1").is(':checked');
            var show_type2 = $("#chk_type2").is(':checked');
            var show_data = $("#chk_data").is(':checked');
            charts_createMultiChart("http://46.101.169.112:5000/show_stats/21", show_type1, show_type2, show_data, user_id, date_from, date_to, 'chartdiv1');
        }
        var user_id = "test@test.com", begin_date = "01.01.2016", end_date = "31.03.2016"
        charts_createGaussian("http://46.101.169.112:5000/gaussian", "http://46.101.169.112:5000/sleepPoints", user_id, begin_date, end_date, 'chartdiv4');
        charts_createHeatmap("http://46.101.169.112:5000/sleepPoints", user_id, begin_date, end_date, 'chartdiv7');

        
        
        /*
        function compare(path) {

            datasetActComp = loadJSONData(path)
            fillDoubleLineChart("chartdiv3", datasetActComp, "date", "value1", "value2", "Daily Movement", "Your activitiy", "Peer Activity", "Activity Level", "YYYY-MM-DD HH:NN", "mm")
        }
        
        dataset = loadJSONData('/getHeartRates')
        fillDoubleOverlay("chartdiv1", dataset, "Morning/Evening HRM", "BPM", "date", "value1", "value2", "MY titke", "My title", " morning  [[value1]]", " evening [[value2]]");

        dataset2 = loadJSONData('/getSleepRates')
        fillDoubleOverlay("chartdiv2", dataset2, "Sleep/Deep Sleep Durations", "hours", "date", "value1", "value2", "MY titke", "My title", " Sleep  [[value1]]", "Deep Sleep [[value2]]");


        dataset5 = loadJSONData('/getVO2MaxRates')
        fillDoubleLineChart("chartdiv5", dataset5, "date", "value1", "value2", "Daily VO2max estimation", "VO2max", "Top  VO2max estimation", " VO2max estimation", 'YYYY-MM-DD', 'DD')
        //fillDoubleOverlay("chartdiv5", dataset5, "Daily/Weekly Estimated V02Max Values", "units", "date", "value1", "value2", "MY titke", "My title", " V02Max day  [[value1]]", "V02Max weekly [[value2]]");
        dataset3 = loadJSONData('/getDailyActivityLevel')

        fillDoubleLineChart("chartdiv3", dataset3, "date", "value1", "value2", "Daily Movement", "Your activitiy", "Average Activity", "Activity Level", "YYYY-MM-DD HH:NN", "mm")

        dataset4 = loadJSONData('/getRawHeartRates')



        fillDoubleLineChart("chartdiv4", dataset4, "date", "value1", "value2", "Daily HRM", "Your activitiy", "Average Activity", "HRM", 'YYYY-MM-DD HH:NN:SS', 'ss')*/
    </script>
    {% endblock %}

    </html>
