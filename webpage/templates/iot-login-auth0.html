<html>
    <head>
        <script src="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
        <script src="https://cdn.auth0.com/js/lock/10.2/lock.min.js"></script>

        <script type="text/javascript" src="//use.typekit.net/iws6ohy.js"></script>
        <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

        <meta name="viewport" content="width=device-width, initial-scale=1">


    </head>
    <body class="home">
        <div class="container">
            <div class="login-page clearfix">
              <div class="login-box auth0-box before">

              </div>
            </div>
        </div>
    <!-- font awesome from BootstrapCDN -->
        <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

        <script>
            var AUTH0_CLIENT_ID = '{{env.AUTH0_CLIENT_ID}}';
            var AUTH0_DOMAIN = '{{env.AUTH0_DOMAIN}}';
            var AUTH0_CALLBACK_URL = '{{env.AUTH0_CALLBACK_URL if env.AUTH0_CALLBACK_URL else "http://localhost:5000/callback"}}';
            var options = {
                auth: {
                    redirectUrl: AUTH0_CALLBACK_URL,
                    responseType: 'code'
                },

                closable: false
                };
            // Initiating our Auth0Lock
            var lock = new Auth0Lock(
                    AUTH0_CLIENT_ID,
                    AUTH0_DOMAIN,
                    options
            );

            // Listening for the authenticated event
            lock.on("authenticated", function(authResult) {
              // Use the token in authResult to getProfile() and save it to localStorage
              lock.getProfile(authResult.idToken, function(error, profile) {
                if (error) {
                  // Handle error
                  return;
                }

                localStorage.setItem('idToken', authResult.idToken);
                localStorage.setItem('profile', JSON.stringify(profile));
              });
            });
            $(function() {
                lock.show();
            });
        </script>

    </body>
</html>